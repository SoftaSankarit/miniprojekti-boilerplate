{% extends "layout.html" %}

{% block title %}
Viitesovellus
{% endblock %}

{% block body %}

{% if is_edit: %}

<div class="form-container">
  <form method="POST" action='/edit_entry/book/{{ book.id }}' id="editForm">
    <div class="form-group">
      <label for="author">Tekijät:</label>
      <input type="text" id="author" name="author" value="{{ book.author }}" required>
    </div>
    <div class="form-group">
      <label for="title">Teoksen nimi:</label>
      <input type="text" id="title" name="title" value="{{ book.title }}" required>
    </div>
    <div class="form-group">
      <label for="publisher">Kustantaja:</label>
      <input type="text" id="publisher" name="publisher" value="{{ book.publisher }}" required>
    </div>
    <div class="form-group">
      <label for="year">Julkaisuvuosi:</label>
      <input type="number" id="year" name="year" value="{{ book.year }}" required>
    </div>
    <button type="submit">Tallenna muutokset</button>
  </form>
</div>
{% else %}
<div class="form-container">
    <form method="POST" action="create_book" id="bookForm">
      <div class="form-group">
        <label for="author">Tekijät:</label>
        <input type="text" id="author" name="author" required>
      </div>
      <div class="form-group">
        <label for="title">Teoksen nimi:</label>
        <input type="text" id="title" name="title" required>
      </div>
      <div class="form-group">
        <label for="publisher">Kustantaja:</label>
        <input type="text" id="publisher" name="publisher" required>
      </div>
      <div class="form-group">
        <label for="year">Julkaisuvuosi:</label>
        <input type="number" id="year" name="year" required>
      </div>
      <!-- Alussa valinnat piilossa -->
      <div id="optionalFields" style="display: none;">
        <div class="form-group">
            <label for="volume">Volyymi:</label>
            <input type="text" id="volume" name="volume" placeholder="Valinnainen tieto">
        </div>
        <div class="form-group">
            <label for="series">Sarja:</label>
            <input type="text" id="series" name="series" placeholder="Valinnainen tieto">
        </div>
        <div class="form-group">
            <label for="address">Osoite:</label>
            <input type="text" id="address" name="address" placeholder="Valinnainen tieto">
        </div>
        <div class="form-group">
            <label for="edition">Painos:</label>
            <input type="text" id="edition" name="edition" placeholder="Valinnainen tieto">
        </div>
        <div class="form-group">
            <label for="month">Kuukausi:</label>
            <input type="text" id="month" name="month" placeholder="Valinnainen tieto">
        </div>
        <div class="form-group">
            <label for="note">Muistiinpano:</label>
            <textarea id="note" name="note" rows="4" placeholder="Valinnainen tieto"></textarea>
        </div>
        <div class="form-group">
            <label for="key">Avain:</label>
            <input type="text" id="key" name="key" placeholder="Valinnainen tieto">
        </div>
        <div class="form-group">
            <label for="url">URL:</label>
            <input type="url" id="url" name="url" placeholder="Valinnainen tieto">
        </div>
    </div>

      <button type="button" id="toggleOptionalFields">Näytä lisäkentät</button>
      <button type="submit">Lisää</button>
    </form>
  </div>
{% endif %}
<br></b>
<p><button><a href="/" style="color:aliceblue">Lista kirjoista</a></button></p>

<script>
  const toggleButton = document.getElementById('toggleOptionalFields');
  const optionalFields = document.getElementById('optionalFields');

  toggleButton.addEventListener('click', () => {
      if (optionalFields.style.display === 'none') {
          optionalFields.style.display = 'block';
          toggleButton.textContent = 'Piilota lisäkentät';
      } else {
          optionalFields.style.display = 'none';
          toggleButton.textContent = 'Näytä lisäkentät';
      }
  });
</script>
{% endblock %}